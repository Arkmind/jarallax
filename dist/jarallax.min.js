/*!
 * Name    : Just Another Parallax [Jarallax]
 * Version : 1.8.0
 * Author  : _nK <https://nkdev.info>
 * GitHub  : https://github.com/nk-o/jarallax
 */
!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e){var t=["O","Moz","ms","Ms","Webkit"],n=t.length;if(void 0!==l.style[e])return!0;for(e=e.charAt(0).toUpperCase()+e.substr(1);--n>-1&&void 0===l.style[t[n]+e];);return n>=0}function n(){g=window.innerWidth||document.documentElement.clientWidth,h=window.innerHeight||document.documentElement.clientHeight}function o(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,function(){n.call(e)})}function i(e){w(function(){"scroll"!==e.type&&n(),v.forEach(function(t){"scroll"!==e.type&&(t.coverImage(),t.clipContainer()),t.onScroll()})})}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=document.createElement("div"),s=t("transform"),c=t("perspective"),p=navigator.userAgent,m=p.toLowerCase().indexOf("android")>-1,u=/iPad|iPhone|iPod/.test(p)&&!window.MSStream,d=p.toLowerCase().indexOf("firefox")>-1,f=p.indexOf("MSIE ")>-1||p.indexOf("Trident/")>-1||p.indexOf("Edge/")>-1,y=document.all&&!window.atob,g=void 0,h=void 0;n();var v=[],b=0,x=function(){function t(n,o){e(this,t);var i=this;i.instanceID=b++,i.$item=n,i.defaults={type:"scroll",speed:.5,imgSrc:null,imgElement:".jarallax-img",elementInViewport:null,zIndex:-100,noAndroid:!1,noIos:!0,videoSrc:null,videoStartTime:0,videoEndTime:0,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null};var r=i.$item.getAttribute("data-jarallax"),l=JSON.parse(r||"{}");r&&console.warn("Detected usage of deprecated data-jarallax JSON options, you should use pure data-attribute options. See info here - https://github.com/nk-o/jarallax/issues/53");var p=i.$item.dataset,y={};if(Object.keys(p).forEach(function(e){var t=e.substr(0,1).toLowerCase()+e.substr(1);t&&"undefined"!=typeof i.defaults[t]&&(y[t]=p[e])}),i.options=i.extend({},i.defaults,l,y,o),Object.keys(i.options).forEach(function(e){"true"===i.options[e]?i.options[e]=!0:"false"===i.options[e]&&(i.options[e]=!1)}),!(!s||m&&i.options.noAndroid||u&&i.options.noIos)){i.options.speed=Math.min(2,Math.max(-1,parseFloat(i.options.speed)));var g=i.options.elementInViewport;g&&"object"===("undefined"==typeof g?"undefined":a(g))&&"undefined"!=typeof g.length&&(g=g[0]),g instanceof Element||(g=null),i.options.elementInViewport=g;var h=i.options.imgElement;h&&"string"==typeof h&&(h=i.$item.querySelector(h)),h instanceof Element||(h=null),i.image={src:i.options.imgSrc||null,$container:null,$item:h,useImgTag:!!h||u||m||f,position:!c||d?"absolute":"fixed"},i.initImg()&&i.init()}}return r(t,[{key:"css",value:function(e,t){return"string"==typeof t?window.getComputedStyle?window.getComputedStyle(e).getPropertyValue(t):e.style[t]:(t.transform&&(c&&(t.transform+=" translateZ(0)"),t.WebkitTransform=t.transform,t.MozTransform=t.transform,t.msTransform=t.transform,t.OTransform=t.transform),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),e)}},{key:"extend",value:function(e){var t=arguments;return e=e||{},Object.keys(arguments).forEach(function(n){t[n]&&Object.keys(t[n]).forEach(function(o){e[o]=t[n][o]})}),e}},{key:"initImg",value:function(){var e=this;return!!e.image.$item||(null===e.image.src&&(e.image.src=e.css(e.$item,"background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!(!e.image.src||"none"===e.image.src))}},{key:"init",value:function(){var e=this,t={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},n={};e.$item.setAttribute("data-jarallax-original-styles",e.$item.getAttribute("style")),"static"===e.css(e.$item,"position")&&e.css(e.$item,{position:"relative"}),"auto"===e.css(e.$item,"z-index")&&e.css(e.$item,{zIndex:0}),e.image.$container=document.createElement("div"),e.css(e.image.$container,t),e.css(e.image.$container,{"z-index":e.options.zIndex}),e.image.$container.setAttribute("id","jarallax-container-"+e.instanceID),e.$item.appendChild(e.image.$container),e.image.useImgTag?(e.image.$item||(e.image.$item=document.createElement("img"),e.image.$item.setAttribute("src",e.image.src)),n=e.extend({"object-fit":"cover","font-family":"object-fit: cover;","max-width":"none"},t,n)):(e.image.$item=document.createElement("div"),n=e.extend({"background-position":"50% 50%","background-size":"cover","background-repeat":"no-repeat no-repeat","background-image":'url("'+e.image.src+'")'},t,n));for(var o=0,i=e.$item;null!==i&&i!==document&&0===o;){var a=e.css(i,"-webkit-transform")||e.css(i,"-moz-transform")||e.css(i,"transform");a&&"none"!==a&&(o=1,e.css(e.image.$container,{transform:"translateX(0) translateY(0)"})),i=i.parentNode}(o||"opacity"===e.options.type||"scale"===e.options.type||"scale-opacity"===e.options.type||1===e.options.speed)&&(e.image.position="absolute"),n.position=e.image.position,e.css(e.image.$item,n),e.image.$container.appendChild(e.image.$item),e.coverImage(),e.clipContainer(),e.onScroll(!0),e.options.onInit&&e.options.onInit.call(e),setTimeout(function(){e.$item&&e.css(e.$item,{"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0),v.push(e)}},{key:"destroy",value:function(){var e=this;v.forEach(function(t,n){t.instanceID===e.instanceID&&v.splice(n,1)});var t=e.$item.getAttribute("data-jarallax-original-styles");e.$item.removeAttribute("data-jarallax-original-styles"),"null"===t?e.$item.removeAttribute("style"):e.$item.setAttribute("style",t),e.$clipStyles&&e.$clipStyles.parentNode.removeChild(e.$clipStyles),e.image.$container.parentNode.removeChild(e.image.$container),e.options.onDestroy&&e.options.onDestroy.call(e),delete e.$item.jarallax}},{key:"clipContainer",value:function(){if(!y){var e=this,t=e.image.$container.getBoundingClientRect(),n=t.width,o=t.height;if(!e.$clipStyles){e.$clipStyles=document.createElement("style"),e.$clipStyles.setAttribute("type","text/css"),e.$clipStyles.setAttribute("id","#jarallax-clip-"+e.instanceID);var i=document.head||document.getElementsByTagName("head")[0];i.appendChild(e.$clipStyles)}var a=["#jarallax-container-"+e.instanceID+" {","   clip: rect(0 "+n+"px "+o+"px 0);","   clip: rect(0, "+n+"px, "+o+"px, 0);","}"].join("\n");e.$clipStyles.styleSheet?e.$clipStyles.styleSheet.cssText=a:e.$clipStyles.innerHTML=a}}},{key:"coverImage",value:function(){var e=this,t=e.image.$container.getBoundingClientRect(),n=t.height,o=e.options.speed,i="scroll"===e.options.type||"scroll-opacity"===e.options.type,a=0,r=n,l=0;return i&&(a=o<0?o*Math.max(n,h):o*(n+h),o>1?r=Math.abs(a-h):o<0?r=a/o+Math.abs(a):r+=Math.abs(h-n)*(1-o),a/=2),e.parallaxScrollDistance=a,l=i?(h-r)/2:(n-r)/2,e.css(e.image.$item,{height:r+"px",marginTop:l+"px",left:"fixed"===e.image.position?t.left+"px":"0",width:t.width+"px"}),e.options.onCoverImage&&e.options.onCoverImage.call(e),{image:{height:r,marginTop:l},container:t}}},{key:"isVisible",value:function(){return this.isElementInViewport||!1}},{key:"onScroll",value:function(e){var t=this,n=t.$item.getBoundingClientRect(),o=n.top,i=n.height,a={},r=n;if(t.options.elementInViewport&&(r=t.options.elementInViewport.getBoundingClientRect()),t.isElementInViewport=r.bottom>=0&&r.right>=0&&r.top<=h&&r.left<=g,e||t.isElementInViewport){var l=Math.max(0,o),s=Math.max(0,i+o),c=Math.max(0,-o),p=Math.max(0,o+i-h),m=Math.max(0,i-(o+i-h)),u=Math.max(0,-o+h-i),d=1-2*(h-o)/(h+i),f=1;if(i<h?f=1-(c||p)/i:s<=h?f=s/h:m<=h&&(f=m/h),"opacity"!==t.options.type&&"scale-opacity"!==t.options.type&&"scroll-opacity"!==t.options.type||(a.transform="",a.opacity=f),"scale"===t.options.type||"scale-opacity"===t.options.type){var y=1;t.options.speed<0?y-=t.options.speed*f:y+=t.options.speed*(1-f),a.transform="scale("+y+")"}if("scroll"===t.options.type||"scroll-opacity"===t.options.type){var v=t.parallaxScrollDistance*d;"absolute"===t.image.position&&(v-=o),a.transform="translateY("+v+"px)"}t.css(t.image.$item,a),t.options.onScroll&&t.options.onScroll.call(t,{section:n,beforeTop:l,beforeTopEnd:s,afterTop:c,beforeBottom:p,beforeBottomEnd:m,afterBottom:u,visiblePercent:f,fromViewportCenter:d})}}}]),t}(),w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};o(window,"scroll",i),o(window,"resize",i),o(window,"orientationchange",i),o(window,"load",i);var $=function(e){("object"===("undefined"==typeof HTMLElement?"undefined":a(HTMLElement))?e instanceof HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":a(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)&&(e=[e]);var t=arguments[1],n=Array.prototype.slice.call(arguments,2),o=e.length,i=0,r=void 0;for(i;i<o;i++)if("object"===("undefined"==typeof t?"undefined":a(t))||"undefined"==typeof t?e[i].jarallax||(e[i].jarallax=new x(e[i],t)):e[i].jarallax&&(r=e[i].jarallax[t].apply(e[i].jarallax,n)),"undefined"!=typeof r)return r;return e};$.constructor=x;var j=window.jarallax;if(window.jarallax=$,window.jarallax.noConflict=function(){return window.jarallax=j,this},"undefined"!=typeof jQuery){var S=function(){var e=arguments||[];Array.prototype.unshift.call(e,this);var t=$.apply(window,e);return"object"!==("undefined"==typeof t?"undefined":a(t))?t:this};S.constructor=x;var E=jQuery.fn.jarallax;jQuery.fn.jarallax=S,jQuery.fn.jarallax.noConflict=function(){return jQuery.fn.jarallax=E,this}}o(window,"DOMContentLoaded",function(){$(document.querySelectorAll("[data-jarallax], [data-jarallax-video]"))})}();